"use strict";(self.webpackChunkdbt_osmosis=self.webpackChunkdbt_osmosis||[]).push([[602],{2284:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"tutorial-yaml/configuration","title":"Configuration","description":"This page describes how dbt-osmosis discovers file paths and behavior settings.","source":"@site/docs/tutorial-yaml/configuration.md","sourceDirName":"tutorial-yaml","slug":"/tutorial-yaml/configuration","permalink":"/dbt-osmosis/docs/tutorial-yaml/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/z3z1ma/dbt-osmosis/tree/main/docs/docs/tutorial-yaml/configuration.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Settings reference","permalink":"/dbt-osmosis/docs/reference/settings"},"next":{"title":"Explanation","permalink":"/dbt-osmosis/docs/explanation/"}}');var o=n(4848),t=n(8453);const l={sidebar_position:1},r="Configuration",d={},a=[{value:"Routing YAML files",id:"routing-yaml-files",level:2},{value:"Models and seeds",id:"models-and-seeds",level:3},{value:"Sources",id:"sources",level:3},{value:"Behavior settings",id:"behavior-settings",level:2},{value:"YAML writer settings",id:"yaml-writer-settings",level:2},{value:"CLI defaults",id:"cli-defaults",level:3},{value:"Folder-level overrides",id:"folder-level-overrides",level:3},{value:"Node-level overrides",id:"node-level-overrides",level:3},{value:"Column-level overrides",id:"column-level-overrides",level:3},{value:"Setting precedence (most specific wins)",id:"setting-precedence-most-specific-wins",level:2},{value:"Common options (excerpt)",id:"common-options-excerpt",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,o.jsx)(s.p,{children:"This page describes how dbt-osmosis discovers file paths and behavior settings."}),"\n",(0,o.jsx)(s.h2,{id:"routing-yaml-files",children:"Routing YAML files"}),"\n",(0,o.jsx)(s.h3,{id:"models-and-seeds",children:"Models and seeds"}),"\n",(0,o.jsxs)(s.p,{children:["Provide a ",(0,o.jsx)(s.code,{children:"+dbt-osmosis"})," template under each folder you want managed:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-yaml",metastring:'title="dbt_project.yml"',children:'models:\n  <your_project_name>:\n    +dbt-osmosis: "_{model}.yml"\n\n    staging:\n      +dbt-osmosis: "{parent}.yml"\n\n    intermediate:\n      +dbt-osmosis: "{node.config[materialized]}/{model}.yml"\n\nseeds:\n  <your_project_name>:\n    +dbt-osmosis: "_schema.yml"\n'})}),"\n",(0,o.jsxs)(s.p,{children:["If a node does not have a ",(0,o.jsx)(s.code,{children:"+dbt-osmosis"})," rule, dbt-osmosis can fall back to ",(0,o.jsx)(s.code,{children:"vars.dbt_osmosis_default_path"}),":"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-yaml",metastring:'title="dbt_project.yml"',children:'vars:\n  dbt_osmosis_default_path: "_{model}.yml"\n'})}),"\n",(0,o.jsx)(s.h3,{id:"sources",children:"Sources"}),"\n",(0,o.jsxs)(s.p,{children:["Configure managed sources under ",(0,o.jsx)(s.code,{children:"vars.dbt-osmosis.sources"}),":"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-yaml",metastring:'title="dbt_project.yml"',children:'vars:\n  dbt-osmosis:\n    sources:\n      salesforce:\n        path: "staging/salesforce/source.yml"\n        schema: "salesforce_v2"\n      marketo: "staging/customer/marketo.yml"\n\n    column_ignore_patterns:\n      - "_FIVETRAN_SYNCED"\n      - ".*__key__.namespace"\n'})}),"\n",(0,o.jsx)(s.h2,{id:"behavior-settings",children:"Behavior settings"}),"\n",(0,o.jsx)(s.p,{children:"Use CLI flags for global defaults and override them in config when needed."}),"\n",(0,o.jsx)(s.h2,{id:"yaml-writer-settings",children:"YAML writer settings"}),"\n",(0,o.jsxs)(s.p,{children:["You can tune the underlying ",(0,o.jsx)(s.code,{children:"ruamel.yaml"})," serializer via ",(0,o.jsx)(s.code,{children:"vars.dbt-osmosis.yaml_settings"}),":"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-yaml",metastring:'title="dbt_project.yml"',children:"vars:\n  dbt-osmosis:\n    yaml_settings:\n      width: 120\n      preserve_quotes: true\n"})}),"\n",(0,o.jsx)(s.h3,{id:"cli-defaults",children:"CLI defaults"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"dbt-osmosis yaml refactor \\\n  --skip-add-columns \\\n  --skip-add-data-types \\\n  --skip-merge-meta \\\n  --skip-add-tags \\\n  --numeric-precision-and-scale \\\n  --string-length \\\n  --force-inherit-descriptions \\\n  --output-to-lower \\\n  --add-progenitor-to-meta \\\n  --strip-eof-blank-lines\n"})}),"\n",(0,o.jsx)(s.h3,{id:"folder-level-overrides",children:"Folder-level overrides"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-yaml",metastring:'title="dbt_project.yml"',children:'models:\n  my_project:\n    staging:\n      +dbt-osmosis: "{parent}.yml"\n      +dbt-osmosis-options:\n        skip-add-columns: true\n        sort-by: "alphabetical"\n\n    intermediate:\n      +dbt-osmosis: "{node.config[materialized]}/{model}.yml"\n      +dbt-osmosis-options:\n        skip-add-tags: true\n        output-to-lower: true\n'})}),"\n",(0,o.jsx)(s.h3,{id:"node-level-overrides",children:"Node-level overrides"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-jinja",metastring:'title="models/intermediate/some_model.sql"',children:'{{ config(\n    materialized=\'incremental\',\n    dbt_osmosis_options={\n      "skip-add-data-types": true,\n      "sort-by": "alphabetical"\n    }\n) }}\n'})}),"\n",(0,o.jsx)(s.h3,{id:"column-level-overrides",children:"Column-level overrides"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-yaml",children:"tables:\n  - name: some_model\n    columns:\n      - name: tricky_column\n        meta:\n          dbt-osmosis-skip-add-data-types: true\n          dbt_osmosis_options:\n            skip-add-tags: true\n"})}),"\n",(0,o.jsx)(s.h2,{id:"setting-precedence-most-specific-wins",children:"Setting precedence (most specific wins)"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["Column ",(0,o.jsx)(s.code,{children:"meta"})," and column ",(0,o.jsx)(s.code,{children:"dbt-osmosis-options"})]}),"\n",(0,o.jsxs)(s.li,{children:["Node ",(0,o.jsx)(s.code,{children:"meta"})," and ",(0,o.jsx)(s.code,{children:"dbt_osmosis_options"})]}),"\n",(0,o.jsxs)(s.li,{children:["Node ",(0,o.jsx)(s.code,{children:"config.extra"})," and ",(0,o.jsx)(s.code,{children:"dbt_osmosis_options"})]}),"\n",(0,o.jsx)(s.li,{children:"CLI defaults / fallback settings"}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"common-options-excerpt",children:"Common options (excerpt)"}),"\n",(0,o.jsxs)(s.p,{children:["See the ",(0,o.jsx)(s.a,{href:"../reference/settings",children:"settings reference"})," for the full list of options and defaults."]})]})}function m(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>r});var i=n(6540);const o={},t=i.createContext(o);function l(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);